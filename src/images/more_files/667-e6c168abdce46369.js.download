(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[667],{90667:function(e,t,n){"use strict";n.d(t,{O:function(){return be}});var r=n(85893),o=n(67294),a=n(82580),i=n(45697),l=n.n(i),m=n(87588),c=n(84522),s=n(32766),d=n(10527),u=n(32173),p=n(4621),f={0:"\u0627\u0645\u062a\u06cc\u0627\u0632 \u062f\u0647\u06cc\u062f",1:"\u062e\u06cc\u0644\u06cc \u0628\u062f",2:"\u0628\u062f",3:"\u0645\u0639\u0645\u0648\u0644\u06cc",4:"\u062e\u0648\u0628",5:"\u0639\u0627\u0644\u06cc"},_=n(5563),x=n(54142),C=n(9730),g=n(80288),b=n(19675),h=n(55678),v=n(50133),y=n.n(v),j=function(e){var t=e.className,n=e.commentGuidesContent,o=e.commentGuidesTitle,a=(0,m.dh)(y().AddCommentStaticContent,"border radius",t);return(0,r.jsxs)("div",{className:a,children:[(0,r.jsx)(c.Dx,{label:o}),(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:n}})]})},A=n(66556),I=n.n(A);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}function N(e){var t,n,a=e.className,i=e.thumbClassName,l=e.rangeClassName,s=e.beginning,d=e.end,u=e.initialMinValue,p=e.initialMaxValue,f=e.isBottomSlotVisible,_=e.hasBeginningThumb,x=void 0===_||_,C=e.RangeInputOnChange,g=(0,o.useState)({minValue:u,maxValue:p}),b=g[0],h=g[1],v=(0,o.useRef)(null);(0,o.useEffect)((function(){h({minValue:u,maxValue:p})}),[u,p]);var y=(0,m.dh)("d-flex jc-center",I().RangeInput,a),j=(0,o.useCallback)((function(e){return Math.round((e-s)/(d-s)*100)}),[s,d]);(0,o.useEffect)((function(){var e=j(b.minValue),t=j(b.maxValue);v.current&&(v.current.style.right="".concat(e,"%"),v.current.style.width="".concat(t-e,"%"))}),[b.minValue,b.maxValue,j]);var A=(0,o.useRef)();return(0,r.jsxs)("div",{className:y,children:[!!x&&(0,r.jsx)("input",{type:"range",min:s,max:d,id:"2",value:b.minValue,onChange:function(e){var t=Math.min(Number(e.target.value),b.maxValue-1);t>=b.maxValue||(h(O({},b,{minValue:t})),clearTimeout(A.current),A.current=setTimeout((function(){C(t,b.maxValue)}),500))},className:(0,m.dh)("w-100 absolute z-4",I().RangeInput__thumb,i)}),(0,r.jsx)("input",{type:"range",min:s,id:"3",max:d,value:b.maxValue,onChange:function(e){var t=Math.max(Number(e.target.value),b.minValue+1);t<=b.minValue||(h(O({},b,{maxValue:t})),clearTimeout(A.current),A.current=setTimeout((function(){C(b.minValue,t)}),500))}.bind(null),className:(0,m.dh)("w-100 absolute z-3",I().RangeInput__thumb,i)}),(0,r.jsxs)("div",{className:"w-100 relative",children:[(0,r.jsx)("div",{className:(0,m.dh)("absolute z-1 w-100 bg-200",I().RangeInput__track)}),(0,r.jsx)("div",{ref:v,className:(0,m.dh)("absolute z-2 bg-s-500",I().RangeInput__range,l)}),(0,r.jsx)("div",{className:"d-flex jc-between w-100 mt-4",children:f&&(null===(t=(0,m.c6)(s,d))||void 0===t||null===(n=t.map)||void 0===n?void 0:n.call(t,(function(e){return(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)(c.gx,{className:"mx-4 d-block w-100 ",color:"neutral-400"}),(0,r.jsxs)("div",{className:"d-flex ai-center pt-1",children:[(0,r.jsx)("p",{className:(0,m.dh)("mr-1 mt-1 text-body-1 color-300",{"color-700":e>=b.minValue&&e<=b.maxValue}),children:(0,m.Uu)(e)}),(0,r.jsx)(c.JO,{icon:"starFill",size:15,color:e>=b.minValue&&e<=b.maxValue?"high-emphasis":"disable"})]})]},e)})))})]})]})}var w=n(9234),R=n.n(w);function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function U(e){var t=e.onChange,n=e.name,a=e.className,i=e.minValue,l=e.maxValue,c=e.ratingMap,s=e.text,d=e.error,u=e.initialValues,p=(0,o.useState)([u||i]),f=p[0],_=p[1],x=(0,m.dh)("bg-200 radius-circle",R().AddCommentRatingBarInput__dot);(0,o.useEffect)((function(){t(n,20*f)}),[f]),(0,o.useEffect)((function(){f!==u&&_([u])}),[u]);return(0,r.jsxs)("div",{className:(0,m.dh)("d-flex jc-center flex-wrap px-3-lg pb-6 relative",a),children:[(0,r.jsxs)("div",{className:"mb-4 d-flex ai-center",children:[(0,r.jsx)("span",{className:"color-hint-text-error ml-1",children:"*"}),(0,r.jsxs)("p",{className:"text-body1-strong color-700",children:[s,":\u200c "]}),(0,r.jsxs)("p",{className:"text-body1-strong color-700 mr-1",children:[" ",c[f]]})]}),(0,r.jsx)(N,{className:(0,m.dh)("w-100",R().AddCommentRatingBarInput),beginning:i,end:l,initialMinValue:i,initialMaxValue:u||i,hasBeginningThumb:!1,RangeInputOnChange:function(e,t){_([t])},rangeClassName:(0,m.dh)(R().AddCommentRatingBarInput__range)}),(0,r.jsxs)("div",{className:"d-flex ai-center jc-between w-full px-2",children:[(0,r.jsx)("div",{className:x}),(0,r.jsx)("div",{className:x}),(0,r.jsx)("div",{className:x}),(0,r.jsx)("div",{className:x}),(0,r.jsx)("div",{className:x}),(0,r.jsx)("div",{className:x})]}),d&&(0,r.jsx)("div",{className:"text-body-2 mt-1 ml-auto",children:d&&(0,r.jsx)("div",{className:"color-hint-text-error",children:d})})]})}U.propTypes={onChange:l().func.isRequired,minValue:l().number.isRequired,maxValue:l().number.isRequired,ratingMap:l().object.isRequired,name:l().string.isRequired};var F=function(e){var t=e.formik,n=e.name,o=k(e,["formik","name"]);return(0,r.jsx)(U,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){V(e,t,n[t])}))}return e}({name:n,onChange:t.setFieldValue,value:t.values[n],error:t.touched[n]&&t.errors[n]},o))},T=n(14474),P=n.n(T);function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){M(e,t,n[t])}))}return e}function E(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var B=[{title:"\u067e\u06cc\u0634\u0646\u0647\u0627\u062f \u0645\u06cc\u200c\u06a9\u0646\u0645",value:"recommended",icon:"thumbsUp"},{title:"\u0645\u0637\u0645\u0626\u0646 \u0646\u06cc\u0633\u062a\u0645",value:"no_idea",icon:"doubt"},{title:"\u067e\u06cc\u0634\u0646\u0647\u0627\u062f \u0646\u0645\u06cc\u200c\u06a9\u0646\u0645",value:"not_recommended",icon:"thumbsDown"}],q=function(e){var t,n=e.title,o=e.icon,a=e.selected,i=e.onClick,l=(0,m.dh)("pointer text-caption p-4 radius-medium ml-2 last:ml-0 d-flex flex-column ai-center text-no-wrap grow-1",P().AddCommentRecommendedInput,(M(t={"color-secondary-500":a},P()["AddCommentRecommendedInput__recommendedOption--selected"],a),M(t,"color-400 border",!a),t));return(0,r.jsxs)("div",{className:l,onClick:function(){return i()},children:[!!o&&(0,r.jsx)(c.JO,{icon:o,size:36,className:"mb-2",color:a?"secondary":"low-emphasis"}),(0,r.jsx)("p",{children:n})]})};function z(e){var t=e.onChange,n=e.name,a=e.className,i=e.initialValue,l=void 0===i?null:i,c=e.error,s=(0,o.useState)(l),d=s[0],u=s[1],p=(0,m.dh)("pt-7-lg pb-6 pos-relative",a);return(0,o.useEffect)((function(){t(n,d)}),[d]),(0,o.useEffect)((function(){null===d&&u(l)}),[l]),(0,r.jsxs)("div",{className:p,children:[(0,r.jsx)("div",{className:"d-flex jc-center",children:B.map((function(e){return(0,r.jsx)(q,G({onClick:function(){return u(e.value)},selected:d===e.value},e),e.value)}))}),(0,r.jsx)("div",{className:"color-hint-text-error text-body-2 mt-1",children:c})]})}z.propTypes={onChange:l().func.isRequired,name:l().string.isRequired};var D=function(e){var t=e.formik,n=e.name,o=E(e,["formik","name"]);return(0,r.jsx)(z,G({name:n,onChange:t.setFieldValue,value:t.values[n],error:t.errors[n]},o))};function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Q(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e){var t=e.onChange,n=e.className,a=e.initialValues,i=void 0===a?[]:a,l=e.name,s=e.isPostive,d=void 0!==s&&s,u=function(e){e.trim().length>=3?(_(Q(f).concat([e])),y(null),b("")):y(C.g_)},p=(0,o.useState)(i),f=p[0],_=p[1],x=(0,o.useState)(""),g=x[0],b=x[1],h=(0,o.useState)(null),v=h[0],y=h[1],j=(0,m.dh)("d-flex jc-center flex-wrap pt-7-lg pb-6-lg py-3 pos-relative",n);return(0,o.useEffect)((function(){0===f.length&&0!==i.length&&_(i)}),[i]),(0,o.useEffect)((function(){t(l,f)}),[f]),(0,r.jsxs)("div",{className:j,children:[(0,r.jsx)(c.nv,{labelClassName:"text-body-1",errorClassName:"color-hint-text-error text-body-2",inputClassName:"radius-medium",className:"w-full",onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),e.target.value.length>=3&&u(e.target.value))},onChange:function(e){b(e.target.value),y(null)},value:g,name:"subject",appendIcon:"addSimple",appendIconColor:"low-emphasis",appendIconOnClick:function(){u(g)},label:d?"\u0646\u06a9\u0627\u062a \u0645\u062b\u0628\u062a":"\u0646\u06a9\u0627\u062a \u0645\u0646\u0641\u06cc",error:v}),f.map((function(e){return(0,r.jsxs)("div",{className:"d-flex ai-center mt-2 w-full",children:[d?(0,r.jsx)(c.JO,{icon:"addSimple",size:20,color:"success",className:"pointer"}):(0,r.jsx)(c.JO,{icon:"removeSimple",size:20,color:"error",className:"pointer"}),(0,r.jsx)("p",{className:"mr-2 text-body-2",children:e}),(0,r.jsx)(c.JO,{icon:"delete",size:20,color:"low-emphasis",className:"mr-auto pointer",onClick:function(){return t=e,void(f.length>1?_(f.filter((function(e){return e!==t}))):_([]));var t}})]},e)}))]})}H.propTypes={onChange:l().func.isRequired,name:l().string.isRequired,isPostive:l().bool};var X=function(e){var t=e.formik,n=e.name,o=L(e,["formik","name"]);return(0,r.jsx)(H,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){K(e,t,n[t])}))}return e}({name:n,onChange:t.setFieldValue,value:t.values[n],error:t.touched[n]&&t.errors[n]},o))},Z=n(55162),W=n(81440),Y=n(74799),$=n(55893),ee=n(63344),te=n.n(ee);function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){re(e,t,n[t])}))}return e}function ae(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ie(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e){var t=e.inputProps,n=e.rootProps;return(0,r.jsxs)("div",oe({},n,{children:[(0,r.jsx)("input",oe({},t)),(0,r.jsx)(c.JO,{icon:"addCircleOutline",color:"secondary",size:32}),(0,r.jsx)("p",{className:"text-body2-strong",children:"\u0627\u0641\u0632\u0648\u062f\u0646"})]}))}function me(e){var t=e.percentage,n=e.submitCommentsMediaUploadLoading,o=e.onCancel,a=e.className;return n?(0,r.jsxs)("div",{className:(0,m.dh)("pos-relative ml-2 overflow-hidden radius-medium bg-900",te().AddCommentUGCInput__CTA,a),children:[(0,r.jsxs)("div",{className:(0,m.dh)("pos-absolute d-flex ai-center color-000",te().AddCommentUGCInput__CTAUploadIcon),children:[(0,r.jsx)(c.JO,{icon:"fileTransferUpload",color:"white",size:24}),(0,r.jsxs)("p",{className:"mr-2",children:[(0,W.c9)(t)," % "]})]}),(0,r.jsx)("div",{className:(0,m.dh)("p-2 bg-000 pos-absolute radius border",te().AddCommentUGCInput__CTACancleIcon),children:(0,r.jsx)(c.JO,{icon:"cancel",size:24,onClick:o})})]}):null}function ce(e){var t=e.imageTemporaryId,n=e.imageUrl,a=e.onDelete,i=(e.className,(0,o.useState)(!1)),l=i[0],s=i[1];return(0,o.useEffect)((function(){var e,t=new URL(n),r=null===t||void 0===t||null===(e=t.pathname)||void 0===e?void 0:e.split(".")[1];["mp4","x-m4v","x-msvideo","m4v"].includes(r)&&s(!0)}),[]),(0,r.jsxs)("div",{className:(0,m.dh)("pos-relative mr-2 overflow-hidden radius",te().AddCommentUGCInput__UGCImage),children:[l?(0,r.jsx)("div",{className:"radius-medium border-200 d-flex ai-center jc-center bg-000 w-full h-full",style:{width:"96px",height:"96px"},children:(0,r.jsx)(c.Ee,{src:"/statics/img/svg/media.svg",alt:"video",width:32,height:32})}):(0,r.jsx)(c.Ee,{src:n,alt:"digikala",width:96,height:96,className:"bg-900"}),(0,r.jsx)("div",{className:(0,m.dh)("p-2 pos-absolute radius-medium",te().AddCommentUGCInput__CTADeleteIcon),children:(0,r.jsx)(c.JO,{icon:"delete",size:24,color:"white",onClick:function(){a(t)}})})]})}function se(e){var t=e.onChange,n=e.className,a=(e.name,e.type),i=void 0===a?"comment":a,l=(e.returnId,e.defaultValues),c=void 0===l?[]:l,s=e.acceptFileFormats,u=void 0===s?"image/jpeg, image/png, video/mp4 ,video/x-m4v ,video/x-msvideo":s,f=(0,o.useState)([]),_=f[0],x=f[1],C=(0,o.useState)(c),g=C[0],b=C[1],h=(0,o.useState)(0),v=h[0],y=h[1];(0,o.useEffect)((function(){(0,Y.Xy)(g,c)||b(c)}),[c]);var j=0,A=(0,d.E)({apiMethod:p.kb,onUploadProgressCallback:function(e){var t=e.loaded,n=e.total;(j=Math.floor(100*t/n))<=100&&y(j)}}),I=A.request,S=A.pending,O=A.cancelRequest,N=(0,d.E)({apiMethod:p.uB}).request,w=(0,Z.uI)({onDrop:function(e){"comment"===i&&I({file:e[0]}).then((function(e){x(ie(_).concat([oe({},null===e||void 0===e?void 0:e.temporaryMedia)]))}))},multiple:!1,maxFiles:8,accept:u}),R=w.getRootProps,V=w.getInputProps,k=function(e){var t=_.filter((function(t){return t.imageTemporaryId!==e}));"comment"===i&&N({temporaryId:e}).then((function(){x(t)}))},U=function(e){var t=g.filter((function(t){return t.commentFileMediaStorageIds!==e}));b(t)};(0,o.useEffect)((function(){"comment"===i?t("temporaryMediaIds",_.map((function(e){return e.imageTemporaryId}))):"return"===i&&t(_.map((function(e){return e.imageTemporaryId})))}),[_]),(0,o.useEffect)((function(){"comment"===i&&t("oldFilesMediaIds",g.map((function(e){return e.commentFileMediaStorageIds[0]})))}),[g]);var F=[(0,r.jsx)(me,{className:"shrink-0",submitCommentsMediaUploadLoading:S,percentage:v,onCancel:function(){O()}},"UGCUploadLoding")].concat(ie(_.map((function(e){return(0,r.jsx)(ce,{className:"shrink-0",imageTemporaryId:null===e||void 0===e?void 0:e.imageTemporaryId,imageUrl:null===e||void 0===e?void 0:e.imageUrl,onDelete:k},null===e||void 0===e?void 0:e.imageTemporaryId)}))),ie(g.map((function(e){return(0,r.jsx)(ce,{imageTemporaryId:null===e||void 0===e?void 0:e.commentFileMediaStorageIds,imageUrl:null===e||void 0===e?void 0:e.commentFileMediaUrl,onDelete:U},null===e||void 0===e?void 0:e.commentFileMediaStorageIds)}))));return(0,r.jsxs)("div",{className:(0,m.dh)("d-flex ai-center",n),children:[(0,r.jsx)(le,{rootProps:R({className:(0,m.dh)("d-flex flex-column ai-center color-secondary-500 py-4 px-5 radius-medium pointer shrink-0",te().AddCommentUGCInput__CTAAdd,te().AddCommentUGCInput__CTA)}),inputProps:V()},"UGCUploadInput"),(0,r.jsx)($.l,{className:"w-min-0 grow-1 mr-2",items:F})]})}se.propTypes={onChange:l().func.isRequired,name:l().string.isRequired,type:l().oneOf(["comment","return"]),returnId:l().string};var de=function(e){var t=e.formik,n=e.name,o=ae(e,["formik","name"]);return(0,r.jsx)(se,oe({name:n,onChange:t.setFieldValue,value:t.values[n],error:t.touched[n]&&t.errors[n]},o))},ue=n(75863),pe=n.n(ue);function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_e(e,t,n[t])}))}return e}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(m){l=!0,o=m}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ge="rating",be=function(e){var t=e.productId,n=e.onSuccess,i=e.onClose,l=e.useStaticFactor,v=void 0===l||l,y=e.contentClassName,A=e.isOpen,I=e.submitButtonProps,S=(0,o.useState)(!1),O=S[0],N=S[1],w=(0,d.Z)({apiMethod:(0,p.QO)({productId:t}),onSuccess:function(e){(0,_.p)({message:"\u0646\u0638\u0631 \u0634\u0645\u0627 \u062b\u0628\u062a \u06af\u0631\u062f\u06cc\u062f \u0648 \u067e\u0633 \u0627\u0632 \u062a\u0627\u06cc\u06cc\u062f\u060c \u0646\u0645\u0627\u06cc\u0634 \u062f\u0627\u062f\u0647 \u062e\u0648\u0627\u0647\u062f \u0634\u062f"}),n&&n(),i&&i()}}),R=w.request,V=w.pendingSubmitAddComment,k=(0,u.V)({apiMethod:(0,p.qQ)({productId:t}),disabled:!A||!t}).data,U=k.commentBody,T=k.commentTitle,P=k.commentAdvantages,M=k.commentDisadvantages,G=k.commentRateFactors,E=k.commentRecommendationStatus,B=k.commentRates,q=k.commentGuidesContent,z=k.commentGuidesTitle,J=k.commentIsAnonymous,K=k.enableReinitialize,L=void 0===K||K,Q=k.commentFiles,H=k.commentRate,Z=k.userIsbuyer,W=(0,a.TA)({enableReinitialize:L,validateOnChange:O,initialValues:xe({comment:U,title:T,advantages:P,disAdvantages:M,isAnonymous:J,recommend:E},Object.entries(B||{}).reduce((function(e,t){var n=Ce(t,2);return xe({},e,_e({},n[0],n[1]))}),{})),onSubmit:function(e){var t={};v||(t=null===G||void 0===G?void 0:G.reduce((function(t,n){return xe({},t,_e({},n.commentRateFactorId,e[n.commentRateFactorId]))}),{})),R({title:e.title,comment:e.comment,advantages:e.advantages,disAdvantages:e.disAdvantages,temporaryMediaIds:e.temporaryMediaIds,oldFilesMediaIds:e.oldFilesMediaIds,isAnonymous:e.isAnonymous,rating:e.rating,recommend:e.recommend,ratings:t})},validate:function(e){var t={};return(!e.comment||e.comment&&(0,x.C1)(e.comment.trim()))&&(t.comment=C.j1),e.comment&&e.comment.trim().length<3&&(t.comment=C.g_),Z&&(0,x.C1)(e.recommend)&&(t.recommend="\u067e\u06cc\u0634\u0646\u0647\u0627\u062f \u062e\u0631\u06cc\u062f \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647 \u0627\u0633\u062a"),v?G&&(0,x.C1)(e.rating)&&(t.rating="\u0627\u0645\u062a\u06cc\u0627\u0632 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647 \u0627\u0633\u062a"):null===G||void 0===G||G.map((function(n){(0,x.C1)(e[n.commentRateFactorId])&&(t[n.commentRateFactorId]="\u0627\u0645\u062a\u06cc\u0627\u0632 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647 \u0627\u0633\u062a")})),t}});return(0,r.jsxs)("form",{onSubmit:W.handleSubmit,children:[(0,r.jsxs)("div",{className:(0,m.dh)("d-flex ai-start mb-1 mb-0-lg px-5",y),children:[(0,r.jsxs)("div",{className:(0,m.dh)("grow-1",pe().AddCommentForm__formWrapper),children:[G&&(0,r.jsx)(r.Fragment,{children:v?(0,r.jsx)(F,{text:"\u0627\u0645\u062a\u06cc\u0627\u0632 \u062f\u0647\u06cc\u062f!",formik:W,minValue:0,maxValue:5,ratingMap:f,className:"border-b pt-4",name:ge,initialValues:Number(H),error:W.errors.rating,autoFocus:!0}):null===G||void 0===G?void 0:G.map((function(e){return(0,r.jsx)(F,{name:e.commentRateFactorId,text:e.commentRateFactorTitleFa,formik:W,minValue:0,maxValue:5,ratingMap:f,className:"border-b pt-4",error:W.errors[e.commentRateFactorId],initialValues:B?B[e.commentRateFactorId]/20:null,autoFocus:!0},e.commentRateFactorId)}))}),Z&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-button-2 color-900 mb-4 mt-7-lg mt-6",children:"\u062e\u0631\u06cc\u062f \u0627\u06cc\u0646 \u0645\u062d\u0635\u0648\u0644 \u0631\u0627 \u0628\u0647 \u062f\u06cc\u06af\u0631\u0627\u0646 ..."}),(0,r.jsx)(D,{required:!0,name:"recommend",autoFocus:!0,formik:W,className:"border-b pb-6",initialValue:E})]}),(0,r.jsx)("p",{className:"text-h5 color-900 my-6",children:"\u062f\u06cc\u062f\u06af\u0627\u0647 \u062e\u0648\u062f \u0631\u0627 \u0634\u0631\u062d \u062f\u0647\u06cc\u062f"}),(0,r.jsx)(c.nv,{labelClassName:"text-body-1",errorClassName:"color-hint-text-error text-body-2",inputClassName:"radius-medium",onChange:W.handleChange,name:"title",className:"w-full",value:W.values.title,label:"\u0639\u0646\u0648\u0627\u0646 \u0646\u0638\u0631"}),(0,r.jsx)(X,{name:"advantages",formik:W,className:"mt-3-lg",initialValues:P,isPostive:!0,autoFocus:!0}),(0,r.jsx)(X,{name:"disAdvantages",formik:W,initialValues:M,className:"mt-3-lg",autoFocus:!0}),(0,r.jsx)(c.nv,{labelClassName:"text-body-1",requiredClassName:"color-hint-text-error",errorClassName:"color-hint-text-error text-body-2",inputClassName:"radius-medium",className:(0,m.dh)("mt-3 w-full",pe().AddCommentForm__textarea),onChange:W.handleChange,name:"comment",value:W.values.comment,label:"\u0645\u062a\u0646 \u0646\u0638\u0631",placeholder:"\u0628\u0631\u0627\u06cc \u0645\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f...",error:W.errors.comment,isTextarea:!0,required:!0}),Z&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-h5 color-900 mt-5-lg mt-6",children:"\u0627\u0631\u0633\u0627\u0644 \u0645\u062d\u062a\u0648\u0627"}),(0,r.jsx)("p",{className:"text-body-2 color-500 mb-4",children:"\u062d\u062f\u0627\u06a9\u062b\u0631 \u06f5 \u0639\u06a9\u0633 \u06f5 \u0645\u06af\u0627\u0628\u0627\u06cc\u062a \u0648 \u06f3 \u0648\u06cc\u062f\u06cc\u0648 \u0628\u0627 \u0641\u0631\u0645\u062a MP4 \u062a\u0627 \u06f1\u06f0\u06f0 \u0645\u06af\u0627\u0628\u0627\u06cc\u062a"}),(0,r.jsx)(de,{name:"temporaryMediaIds",formik:W,className:"border-b pb-3",defaultValues:Q,autoFocus:!0})]}),(0,r.jsxs)("div",{className:"d-flex ai-center mb-5-lg mt-4-lg mt-3 mb-4",children:[(0,r.jsx)(g.X,{name:"isAnonymous",labelClassName:"text-body-1 color-700",value:W.values.isAnonymous,onChange:function(e){return W.setFieldValue("isAnonymous",e.target.checked)}}),(0,r.jsx)("p",{className:"text-button-2 color-700 mr-5",children:"\u0627\u0631\u0633\u0627\u0644 \u062f\u06cc\u062f\u06af\u0627\u0647 \u0628\u0647 \u0635\u0648\u0631\u062a \u0646\u0627\u0634\u0646\u0627\u0633"})]})]}),z&&(0,r.jsx)(j,{className:"px-4 py-5 d-none d-block-lg mr-5 grow-1",commentGuidesContent:q,commentGuidesTitle:z})]}),(0,r.jsxs)("div",{className:(0,m.dh)("d-flex flex-column flex-row-lg jc-start ai-center gap-10-lg py-5-lg py-4 shadow-1-top px-5",pe().Form__submit),children:[(0,r.jsx)("div",{className:"grow-5 w-full w-unset-lg",onClick:function(){N(!0)},children:(0,r.jsx)(b.z,xe({type:"submit",size:"large",className:"w-full",isLoading:V},I,{children:"\u062b\u0628\u062a \u062f\u06cc\u062f\u06af\u0627\u0647"}))}),(0,r.jsxs)("p",{className:"mt-2 mt-0-lg text-caption grow-1",children:["\u062b\u0628\u062a \u062f\u06cc\u062f\u06af\u0627\u0647 \u0628\u0647 \u0645\u0639\u0646\u06cc \u0645\u0648\u0627\u0641\u0642\u062a \u0628\u0627",(0,r.jsx)(h.e,{className:"mx-1 color-secondary-500",href:s.m,target:"_blank",children:"\u0642\u0648\u0627\u0646\u06cc\u0646 \u0627\u0646\u062a\u0634\u0627\u0631 \u062f\u06cc\u062c\u06cc\u200c\u06a9\u0627\u0644\u0627"}),"\u0627\u0633\u062a."]})]})]})};be.propTypes={productId:l().number.isRequired,onSuccess:l().func,submitButtonProps:l().object},be.defaultProps={submitButtonProps:{}}},66556:function(e){e.exports={RangeInput:"RangeInput_RangeInput__2ozgX",RangeInput__track:"RangeInput_RangeInput__track__Ndlae",RangeInput__range:"RangeInput_RangeInput__range__GcBLQ",RangeInput__thumb:"RangeInput_RangeInput__thumb__Ve8fZ"}},75863:function(e){e.exports={AddCommentForm__formWrapper:"AddCommentForm_AddCommentForm__formWrapper__t0eFV",AddCommentForm__textarea:"AddCommentForm_AddCommentForm__textarea__GSyMR"}},9234:function(e){e.exports={AddCommentRatingBarInput__dot:"AddCommentRatingBarInput_AddCommentRatingBarInput__dot__8Xf2Q",AddCommentRatingBarInput:"AddCommentRatingBarInput_AddCommentRatingBarInput__KKm5A",AddCommentRatingBarInput__range:"AddCommentRatingBarInput_AddCommentRatingBarInput__range__X4dxQ"}},14474:function(e){e.exports={AddCommentRecommendedInput:"AddCommentRecommendedInput_AddCommentRecommendedInput__8heTo","AddCommentRecommendedInput__recommendedOption--selected":"AddCommentRecommendedInput_AddCommentRecommendedInput__recommendedOption--selected__sHLPU"}},50133:function(e){e.exports={"text-h1":"AddCommentStaticContent_text-h1__o_SQ4",breakpoint:"AddCommentStaticContent_breakpoint__2dhK_","text-h1-extra":"AddCommentStaticContent_text-h1-extra__qAGM6","text-h2":"AddCommentStaticContent_text-h2__j7B5U","text-h2-extra":"AddCommentStaticContent_text-h2-extra__GlyQY","text-h3":"AddCommentStaticContent_text-h3__UhkEH","text-h3-extra":"AddCommentStaticContent_text-h3-extra__27_HT","text-h4":"AddCommentStaticContent_text-h4__gyt_K","text-h4-extra":"AddCommentStaticContent_text-h4-extra__E_hBe","text-h5":"AddCommentStaticContent_text-h5__71PK1","text-h5-extra":"AddCommentStaticContent_text-h5-extra__i_fHM","text-subtitle":"AddCommentStaticContent_text-subtitle__VpRlV","text-subtitle-strong":"AddCommentStaticContent_text-subtitle-strong__QSLPV","text-subtitle-extra":"AddCommentStaticContent_text-subtitle-extra__8fdCj","text-body-1":"AddCommentStaticContent_text-body-1__QSzss",AddCommentStaticContent:"AddCommentStaticContent_AddCommentStaticContent__BcMWy","text-body1-strong":"AddCommentStaticContent_text-body1-strong__blc97","text-body1-extra":"AddCommentStaticContent_text-body1-extra__JViZI","text-body-2":"AddCommentStaticContent_text-body-2___LaGY","text-body2-strong":"AddCommentStaticContent_text-body2-strong__qMXMr","text-body2-extra":"AddCommentStaticContent_text-body2-extra__OETZb","text-caption":"AddCommentStaticContent_text-caption__xg_gb","text-caption-strong":"AddCommentStaticContent_text-caption-strong___xVMn","text-caption-extra":"AddCommentStaticContent_text-caption-extra__WNHxF","text-button-1":"AddCommentStaticContent_text-button-1__hun7S","text-button-2":"AddCommentStaticContent_text-button-2__iXzAJ","text-button-3":"AddCommentStaticContent_text-button-3__aoK_7","color-000":"AddCommentStaticContent_color-000__DS1_K","color-300":"AddCommentStaticContent_color-300__DZmAG","color-400":"AddCommentStaticContent_color-400__gzQH8","color-500":"AddCommentStaticContent_color-500__KvE1e","color-600":"AddCommentStaticContent_color-600__hYEe2","color-700":"AddCommentStaticContent_color-700__x7sdj","color-800":"AddCommentStaticContent_color-800__bjF_u","color-900":"AddCommentStaticContent_color-900__nvSxf","color-secondary-700":"AddCommentStaticContent_color-secondary-700__t_7jB","color-primary-700":"AddCommentStaticContent_color-primary-700__WHeKG","color-hint-text-success":"AddCommentStaticContent_color-hint-text-success__Ru_IU","color-primary-100":"AddCommentStaticContent_color-primary-100__Dquzd","color-primary-500":"AddCommentStaticContent_color-primary-500__j6CTU","color-hint-text-error":"AddCommentStaticContent_color-hint-text-error__ByT6B","color-hint-text-neutral":"AddCommentStaticContent_color-hint-text-neutral__xFA_B","color-hint-text-caution":"AddCommentStaticContent_color-hint-text-caution__rZADB","color-secondary-500":"AddCommentStaticContent_color-secondary-500__0rAOC","color-white":"AddCommentStaticContent_color-white__qmUO_","color-black":"AddCommentStaticContent_color-black__CHner","text-no-wrap":"AddCommentStaticContent_text-no-wrap__ZjXE6",ltr:"AddCommentStaticContent_ltr__u9rTd"}},63344:function(e){e.exports={AddCommentUGCInput__CTA:"AddCommentUGCInput_AddCommentUGCInput__CTA__e_voM",AddCommentUGCInput__CTAAdd:"AddCommentUGCInput_AddCommentUGCInput__CTAAdd__ctkFq",AddCommentUGCInput__CTAUploadIcon:"AddCommentUGCInput_AddCommentUGCInput__CTAUploadIcon__UR6NV",AddCommentUGCInput__CTACancleIcon:"AddCommentUGCInput_AddCommentUGCInput__CTACancleIcon__RvwMu",AddCommentUGCInput__CTADeleteIcon:"AddCommentUGCInput_AddCommentUGCInput__CTADeleteIcon__B3haG",AddCommentUGCInput__UGCImage:"AddCommentUGCInput_AddCommentUGCInput__UGCImage__Ch4ia"}}}]);
//# sourceMappingURL=667-e6c168abdce46369.js.map